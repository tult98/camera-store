import{I as qe}from"./chunk-PYIO3TDQ-D8Zv8hXV.js";import{g as T}from"./chunk-PDWBYQOW-Dmlh1vBq.js";import{c as me,D as Ke,I as le,e as Ge,f as He,g as Be,h as fe}from"./chunk-53RYGJCD-CpsdMJrZ.js";import{c as Ue}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{c as w}from"./chunk-6GU6IDUA-CDc7wW5L.js";import{K as We}from"./chunk-6HTZNHPT-edTwFg32.js";import{S as A}from"./chunk-4TC5YS65-Cb_suZcW.js";import{r as f,aP as _,j as t,eZ as Xe,bH as Ye,e_ as he,bI as Ze,bb as Je,bc as Qe,bd as et,bF as ge,bL as tt,bY as ot,bN as st,bM as xe,b as $,cE as it,aa as nt,ad as rt,w as at,v as y,H as lt,E as q,B as Y,a4 as B,G as ve,y as te,b2 as ct,D as k,C as dt,af as be,o as z,Z as ut,X as pt,Y as mt,b7 as ft,x as Z,ah as S,ag as J,a6 as F,bq as M,_ as I,ap as je}from"./index-7F_IjDe6.js";import{f as se,C as ht}from"./index.esm-dHBu74Xj.js";import{X as gt}from"./x-mark-mini-DknEwfdc.js";import{T as Q}from"./Trans-BhgfXYrZ.js";import{C as D}from"./currency-input-BHVE2Enp.js";var xt=Object.defineProperty,K=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,ce=(e,s,o)=>s in e?xt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,vt=(e,s)=>{for(var o in s||(s={}))Ce.call(s,o)&&ce(e,o,s[o]);if(K)for(var o of K(s))ye.call(s,o)&&ce(e,o,s[o]);return e},bt=(e,s)=>{var o={};for(var i in e)Ce.call(e,i)&&s.indexOf(i)<0&&(o[i]=e[i]);if(e!=null&&K)for(var i of K(e))s.indexOf(i)<0&&ye.call(e,i)&&(o[i]=e[i]);return o};const _e=f.forwardRef((e,s)=>{var o=e,{color:i="currentColor"}=o,n=bt(o,["color"]);return f.createElement("svg",vt({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},n),f.createElement("path",{stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.056 1.944h4v4M13.056 1.944l-4 4M1.944 9.056v4h4M1.944 13.056l4-4"}))});_e.displayName="ArrowsPointingOut";var jt=Object.defineProperty,G=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,de=(e,s,o)=>s in e?jt(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,Ct=(e,s)=>{for(var o in s||(s={}))we.call(s,o)&&de(e,o,s[o]);if(G)for(var o of G(s))Pe.call(s,o)&&de(e,o,s[o]);return e},yt=(e,s)=>{var o={};for(var i in e)we.call(e,i)&&s.indexOf(i)<0&&(o[i]=e[i]);if(e!=null&&G)for(var i of G(e))s.indexOf(i)<0&&Pe.call(e,i)&&(o[i]=e[i]);return o};const Ne=f.forwardRef((e,s)=>{var o=e,{color:i="currentColor"}=o,n=yt(o,["color"]);return f.createElement("svg",Ct({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},n),f.createElement("path",{stroke:i,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.5 13.945a6.444 6.444 0 1 0 0-12.89 6.444 6.444 0 0 0 0 12.89M8.167 5.5h2.666M4.167 5.5h1.777M5.944 3.944v3.111M9.056 9.5h1.777M4.167 9.5h2.666M9.056 7.944v3.111"}))});Ne.displayName="CircleSliders";var P="Accordion",_t=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ie,wt,Pt]=Xe(P),[U,po]=Ye(P,[Pt,he]),ne=he(),Oe=_.forwardRef((e,s)=>{const{type:o,...i}=e,n=i,a=i;return t.jsx(ie.Provider,{scope:e.__scopeAccordion,children:o==="multiple"?t.jsx(It,{...a,ref:s}):t.jsx(At,{...n,ref:s})})});Oe.displayName=P;var[Ae,Nt]=U(P),[Ie,Ot]=U(P,{collapsible:!1}),At=_.forwardRef((e,s)=>{const{value:o,defaultValue:i,onValueChange:n=()=>{},collapsible:a=!1,...r}=e,[l,c]=ge({prop:o,defaultProp:i,onChange:n});return t.jsx(Ae,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:_.useCallback(()=>a&&c(""),[a,c]),children:t.jsx(Ie,{scope:e.__scopeAccordion,collapsible:a,children:t.jsx(Re,{...r,ref:s})})})}),It=_.forwardRef((e,s)=>{const{value:o,defaultValue:i,onValueChange:n=()=>{},...a}=e,[r=[],l]=ge({prop:o,defaultProp:i,onChange:n}),c=_.useCallback(p=>l((u=[])=>[...u,p]),[l]),d=_.useCallback(p=>l((u=[])=>u.filter(m=>m!==p)),[l]);return t.jsx(Ae,{scope:e.__scopeAccordion,value:r,onItemOpen:c,onItemClose:d,children:t.jsx(Ie,{scope:e.__scopeAccordion,collapsible:!0,children:t.jsx(Re,{...a,ref:s})})})}),[Rt,W]=U(P),Re=_.forwardRef((e,s)=>{const{__scopeAccordion:o,disabled:i,dir:n,orientation:a="vertical",...r}=e,l=_.useRef(null),c=tt(l,s),d=wt(o),u=ot(n)==="ltr",m=st(e.onKeyDown,h=>{var E;if(!_t.includes(h.key))return;const g=h.target,b=d().filter(L=>{var ae;return!((ae=L.ref.current)!=null&&ae.disabled)}),C=b.findIndex(L=>L.ref.current===g),R=b.length;if(C===-1)return;h.preventDefault();let j=C;const x=0,N=R-1,v=()=>{j=C+1,j>N&&(j=x)},O=()=>{j=C-1,j<x&&(j=N)};switch(h.key){case"Home":j=x;break;case"End":j=N;break;case"ArrowRight":a==="horizontal"&&(u?v():O());break;case"ArrowDown":a==="vertical"&&v();break;case"ArrowLeft":a==="horizontal"&&(u?O():v());break;case"ArrowUp":a==="vertical"&&O();break}const X=j%R;(E=b[X].ref.current)==null||E.focus()});return t.jsx(Rt,{scope:o,disabled:i,direction:n,orientation:a,children:t.jsx(ie.Slot,{scope:o,children:t.jsx(xe.div,{...r,"data-orientation":a,ref:c,onKeyDown:i?void 0:m})})})}),H="AccordionItem",[St,re]=U(H),Se=_.forwardRef((e,s)=>{const{__scopeAccordion:o,value:i,...n}=e,a=W(H,o),r=Nt(H,o),l=ne(o),c=Ze(),d=i&&r.value.includes(i)||!1,p=a.disabled||e.disabled;return t.jsx(St,{scope:o,open:d,disabled:p,triggerId:c,children:t.jsx(Je,{"data-orientation":a.orientation,"data-state":Me(d),...l,...n,ref:s,disabled:p,open:d,onOpenChange:u=>{u?r.onItemOpen(i):r.onItemClose(i)}})})});Se.displayName=H;var ke="AccordionHeader",kt=_.forwardRef((e,s)=>{const{__scopeAccordion:o,...i}=e,n=W(P,o),a=re(ke,o);return t.jsx(xe.h3,{"data-orientation":n.orientation,"data-state":Me(a.open),"data-disabled":a.disabled?"":void 0,...i,ref:s})});kt.displayName=ke;var oe="AccordionTrigger",Ee=_.forwardRef((e,s)=>{const{__scopeAccordion:o,...i}=e,n=W(P,o),a=re(oe,o),r=Ot(oe,o),l=ne(o);return t.jsx(ie.ItemSlot,{scope:o,children:t.jsx(Qe,{"aria-disabled":a.open&&!r.collapsible||void 0,"data-orientation":n.orientation,id:a.triggerId,...l,...i,ref:s})})});Ee.displayName=oe;var Le="AccordionContent",Te=_.forwardRef((e,s)=>{const{__scopeAccordion:o,...i}=e,n=W(P,o),a=re(Le,o),r=ne(o);return t.jsx(et,{role:"region","aria-labelledby":a.triggerId,"data-orientation":n.orientation,...r,...i,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Te.displayName=Le;function Me(e){return e?"open":"closed"}var Et=Oe,Lt=Se,Tt=Ee,Mt=Te,Dt=(e,s,o)=>({attribute:e,operator:s,value:w(o)}),mo=e=>[{value:e.gte,operator:"gte"},{value:e.lte,operator:"lte"},{value:e.gt,operator:"gt"},{value:e.lt,operator:"lt"},{value:e.eq,operator:"eq"}].filter(({value:i})=>i).map(({operator:i,value:n})=>Dt(qe,i,n)),De=B({amount:J([F(),S()]),gte:J([F(),S()]).nullish(),lte:J([F(),S()]).nullish(),lt:S().nullish(),gt:S().nullish(),eq:S().nullish()}).refine(e=>e.amount!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.amountRequired"),path:["amount"]}).refine(e=>e.eq!==void 0||e.lt!==void 0||e.gt!==void 0?!0:e.gte!==void 0&&e.gte!==""||e.lte!==void 0&&e.lte!=="",{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minOrMaxRequired"),path:["gte"]}).refine(e=>{if(e.gte!=null&&e.gte!==""&&e.lte!=null&&e.lte!==""){const s=w(e.gte),o=w(e.lte);return s<=o}return!0},{message:M("stockLocations.shippingOptions.conditionalPrices.errors.minGreaterThanMax"),path:["gte"]}),Vt=De.and(B({id:F().optional()}));function Ve(e,s){const o=e.prices;for(let i=0;i<o.length;i++)for(let n=i+1;n<o.length;n++){const a=o[i],r=o[n];if(a.amount===""||r.amount==="")continue;const l=w(a.amount),c=w(r.amount);l===c&&Ft(s,n),[{value:a.gte,type:"gte"},{value:a.lte,type:"lte"},{value:a.eq,type:"eq"},{value:a.lt,type:"lt"},{value:a.gt,type:"gt"}].forEach(p=>{if(!p.value&&p.value!==0)return;[{value:r.gte,type:"gte"},{value:r.lte,type:"lte"},{value:r.eq,type:"eq"},{value:r.lt,type:"lt"},{value:r.gt,type:"gt"}].forEach(m=>{if(!m.value&&m.value!==0)return;const h=w(p.value),g=w(m.value);h===g&&qt(s,n,m.type)})})}}var zt=B({prices:be(De)}).superRefine(Ve),$t=B({prices:be(Vt)}).superRefine(Ve),Ft=(e,s)=>{e.addIssue({code:je.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.duplicateAmount"),path:["prices",s,"amount"]})},qt=(e,s,o)=>{e.addIssue({code:je.custom,message:M("stockLocations.shippingOptions.conditionalPrices.errors.overlappingConditions"),path:["prices",s,o]})},ze=f.createContext(null),fo=({children:e,onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:o})=>t.jsx(ze.Provider,{value:{onOpenConditionalPricesModal:s,onCloseConditionalPricesModal:o},children:e}),$e=()=>{const e=f.useContext(ze);if(!e)throw new Error("useShippingOptionPrice must be used within a ShippingOptionPriceProvider");return e},Fe=(e,s)=>{const o=s==="region"?"region_prices":"currency_prices",i=s==="region"?"conditional_region_prices":"conditional_currency_prices";return e.replace(o,i)},Kt="rule-item",V=e=>`${Kt}-${e}`,ho=({info:e,variant:s})=>{const{t:o}=$(),{getValues:i,setValue:n}=it(),{onCloseConditionalPricesModal:a}=$e(),[r,l]=f.useState([V(0)]),{field:c,type:d,currency:p,name:u}=e,m=Fe(c,d),h=nt({defaultValues:{prices:i(m)||[{amount:"",gte:"",lte:null}]},resolver:rt(s==="create"?zt:$t)}),{fields:g,append:b,remove:C}=at({control:h.control,name:"prices"}),R=()=>{b({amount:"",gte:"",lte:null}),l([...r,V(g.length)])},j=v=>{C(v)},x=h.handleSubmit(v=>{n(m,v.prices,{shouldDirty:!0,shouldValidate:!0,shouldTouch:!0}),a()},v=>{const O=Object.keys(v.prices||{});l(X=>{const E=new Set(X);return O.forEach(L=>{E.add(V(Number(L)))}),Array.from(E)})}),N=v=>{v.key==="Enter"&&(v.metaKey||v.ctrlKey)&&(console.log("Fired"),v.preventDefault(),v.stopPropagation(),x())};return t.jsx(y,{...h,children:t.jsx(We,{onSubmit:x,onKeyDown:N,className:"flex h-full flex-col",children:t.jsxs(A.Content,{children:[t.jsx(A.Header,{}),t.jsx(A.Body,{className:"size-full overflow-hidden",children:t.jsx("div",{className:"flex size-full flex-1 flex-col items-center overflow-y-auto",children:t.jsx("div",{className:"flex w-full max-w-[720px] flex-col gap-y-8 px-6 py-16",children:t.jsxs("div",{className:"flex w-full flex-col gap-y-6",children:[t.jsxs("div",{children:[t.jsx(A.Title,{asChild:!0,children:t.jsx(lt,{children:o("stockLocations.shippingOptions.conditionalPrices.header",{name:u})})}),t.jsx(A.Description,{asChild:!0,children:t.jsx(q,{size:"small",className:"text-ui-fg-subtle",children:o("stockLocations.shippingOptions.conditionalPrices.description")})})]}),t.jsx(Gt,{value:r,onValueChange:l,children:g.map((v,O)=>t.jsx(Ht,{index:O,onRemove:j,currency:p,control:h.control},v.id))}),t.jsx("div",{className:"flex items-center justify-end",children:t.jsx(Y,{variant:"secondary",size:"small",type:"button",onClick:R,children:o("stockLocations.shippingOptions.conditionalPrices.actions.addPrice")})})]})})})}),t.jsx(A.Footer,{children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx(A.Close,{asChild:!0,children:t.jsx(Y,{variant:"secondary",size:"small",type:"button",children:o("actions.cancel")})}),t.jsx(Y,{size:"small",type:"button",onClick:x,children:o("actions.save")})]})})]})})})},Gt=({children:e,value:s,onValueChange:o})=>t.jsx(Et,{type:"multiple",defaultValue:[V(0)],value:s,onValueChange:o,className:"flex flex-col gap-y-3",children:e}),Ht=({index:e,currency:s,onRemove:o,control:i})=>{const{t:n}=$(),a=r=>{r.stopPropagation(),o(e)};return t.jsxs(Lt,{value:V(e),className:ve("bg-ui-bg-component shadow-elevation-card-rest rounded-lg"),children:[t.jsx(Tt,{asChild:!0,children:t.jsxs("div",{className:"group/trigger flex w-full cursor-pointer items-start justify-between gap-x-2 p-3",children:[t.jsxs("div",{className:"flex flex-1 flex-wrap items-center justify-between gap-2",children:[t.jsx("div",{className:"flex h-7 items-center",children:t.jsx(Ut,{index:e,currency:s,control:i})}),t.jsx("div",{className:"flex min-h-7 items-center",children:t.jsx(Wt,{index:e,currency:s,control:i})})]}),t.jsxs("div",{className:"flex items-center gap-x-2",children:[t.jsx(te,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",onClick:a,children:t.jsx(gt,{})}),t.jsx(te,{size:"small",variant:"transparent",className:"text-ui-fg-muted hover:text-ui-fg-subtle focus-visible:text-ui-fg-subtle",children:t.jsx(ct,{className:"transition-transform group-data-[state=open]/trigger:rotate-180"})})]})]})}),t.jsxs(Mt,{className:"text-ui-fg-subtle",children:[t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:i,name:`prices.${e}.amount`,render:({field:{value:r,onChange:l,...c}})=>t.jsx(y.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(y.Label,{children:n("stockLocations.shippingOptions.conditionalPrices.rules.amount")})}),t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(y.Control,{children:t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:se({value:"0",decimalScale:s.decimal_digits}),decimalScale:s.decimal_digits,symbol:s.symbol_native,code:s.code,value:r,onValueChange:(d,p,u)=>l(u!=null&&u.value?u==null?void 0:u.value:""),autoFocus:!0,...c})}),t.jsx(y.ErrorMessage,{})]})]})})}),t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:i,name:`prices.${e}.gte`,render:({field:r})=>t.jsx(ue,{field:r,label:n("stockLocations.shippingOptions.conditionalPrices.rules.gte"),currency:s,placeholder:"1000"})}),t.jsx(k,{variant:"dashed"}),t.jsx(y.Field,{control:i,name:`prices.${e}.lte`,render:({field:r})=>t.jsx(ue,{field:r,label:n("stockLocations.shippingOptions.conditionalPrices.rules.lte"),currency:s,placeholder:"1000"})}),t.jsx(Bt,{index:e,control:i,currency:s})]})]})},ue=({field:e,label:s,currency:o,placeholder:i})=>{const n=f.useRef(null),{value:a,onChange:r,ref:l,...c}=e,d=fe(n,l),p=()=>{if(a===null){r(""),requestAnimationFrame(()=>{var m;(m=n.current)==null||m.focus()});return}r(null)},u=a===null;return t.jsx(y.Item,{children:t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsxs("div",{className:"flex h-8 items-center gap-x-1",children:[t.jsx(te,{size:"2xsmall",variant:"transparent",onClick:p,children:u?t.jsx(ut,{}):t.jsx(pt,{})}),t.jsx(y.Label,{children:s})]}),!u&&t.jsxs("div",{className:"flex flex-col gap-y-1",children:[t.jsx(y.Control,{children:t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",placeholder:se({value:i,decimalScale:o.decimal_digits}),decimalScale:o.decimal_digits,symbol:o.symbol_native,code:o.code,value:a,ref:d,onValueChange:(m,h,g)=>r(g!=null&&g.value?g==null?void 0:g.value:""),...c})}),t.jsx(y.ErrorMessage,{})]})]})})},Bt=({index:e,control:s,currency:o})=>{const{t:i}=$(),n=z({control:s,name:`prices.${e}`});return n.eq==null&&n.gt==null&&n.lt==null?null:t.jsxs("div",{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"flex items-center gap-x-1 px-3 pt-3",children:[t.jsx(q,{size:"small",leading:"compact",weight:"plus",children:i("stockLocations.shippingOptions.conditionalPrices.customRules.label")}),t.jsx(mt,{content:i("stockLocations.shippingOptions.conditionalPrices.customRules.tooltip"),children:t.jsx(ft,{className:"text-ui-fg-muted"})})]}),t.jsxs("div",{children:[n.eq!=null&&t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Z,{weight:"plus",size:"small",children:i("stockLocations.shippingOptions.conditionalPrices.customRules.eq")})}),t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:n.eq,disabled:!0})]}),n.gt!=null&&t.jsxs(f.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Z,{weight:"plus",size:"small",children:i("stockLocations.shippingOptions.conditionalPrices.customRules.gt")})}),t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:n.gt,disabled:!0})]})]}),n.lt!=null&&t.jsxs(f.Fragment,{children:[t.jsx(k,{variant:"dashed"}),t.jsxs("div",{className:"grid grid-cols-2 items-start gap-x-2 p-3",children:[t.jsx("div",{className:"flex h-8 items-center",children:t.jsx(Z,{weight:"plus",size:"small",children:i("stockLocations.shippingOptions.conditionalPrices.customRules.lt")})}),t.jsx(D,{className:"bg-ui-bg-field-component hover:bg-ui-bg-field-component-hover focus-visible:bg-ui-bg-field-component-hover",symbol:o.symbol_native,code:o.code,value:n.lt,disabled:!0})]})]})]})]})},Ut=({index:e,currency:s,control:o})=>{const i=z({control:o,name:`prices.${e}.amount`});if(i===""||i===void 0)return t.jsx(q,{size:"small",weight:"plus",children:"-"});const n=w(i);return t.jsx(q,{size:"small",weight:"plus",children:T(n,s.code)})},ee=({children:e})=>t.jsx("div",{className:"text-ui-fg-subtle txt-small flex flex-wrap items-center gap-1.5",children:e}),Wt=({index:e,currency:s,control:o})=>{const{t:i,i18n:n}=$(),a=z({control:o,name:`prices.${e}.gte`}),r=z({control:o,name:`prices.${e}.lte`});return(()=>{const c=a?w(a):void 0,d=r?w(r):void 0;return!c&&!d?null:c&&!d?t.jsx(ee,{children:t.jsx(Q,{i18n:n,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.greaterThan",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"gte")],values:{attribute:i("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:T(c,s.code)}})}):!c&&d?t.jsx(ee,{children:t.jsx(Q,{i18n:n,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.lessThan",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"lte")],values:{attribute:i("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),lte:T(d,s.code)}})}):c&&d?t.jsx(ee,{children:t.jsx(Q,{i18n:n,i18nKey:"stockLocations.shippingOptions.conditionalPrices.summaries.range",components:[t.jsx(I,{size:"2xsmall"},"attribute"),t.jsx(I,{size:"2xsmall"},"gte"),t.jsx(I,{size:"2xsmall"},"lte")],values:{attribute:i("stockLocations.shippingOptions.conditionalPrices.attributes.cartItemTotal"),gte:T(c,s.code),lte:T(d,s.code)}})}):null})()},pe=({context:e,code:s,header:o,type:i})=>{const[n,a]=f.useState(0),r=f.useCallback(b=>{if(b){const C=b.offsetWidth;a(C)}},[]),{field:l,control:c,renderProps:d}=Ge({context:e}),p=He({context:e}),{container:u,input:m}=d,{isAnchor:h}=u,g=Ue[s.toUpperCase()];return t.jsx(dt,{control:c,name:l,render:({field:b})=>t.jsx(Be,{...u,...p,outerComponent:t.jsx(Xt,{header:o,isAnchor:h,field:l,control:c,symbolWidth:n,type:i,currency:g}),children:t.jsx(Yt,{field:b,inputProps:m,currencyInfo:g,onMeasureSymbol:r})})})},Xt=({isAnchor:e,header:s,field:o,control:i,symbolWidth:n,type:a,currency:r})=>{const{onOpenConditionalPricesModal:l}=$e(),c=f.useRef(null),d=Fe(o,a),p=z({control:i,name:d});return f.useEffect(()=>{const u=m=>{var h;e&&(m.metaKey||m.ctrlKey)&&m.key.toLowerCase()==="b"&&(m.preventDefault(),(h=c.current)==null||h.click())};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[e]),t.jsxs("div",{className:"absolute inset-y-0 z-[3] flex w-fit items-center justify-center",style:{left:n?`${n+16+4}px`:void 0},children:[(p==null?void 0:p.length)>0&&!e&&t.jsx("div",{className:"flex size-[15px] items-center justify-center group-hover/container:hidden",children:t.jsx(Ne,{className:"text-ui-fg-interactive"})}),t.jsx("button",{ref:c,type:"button",className:ve("hover:text-ui-fg-subtle text-ui-fg-muted transition-fg hidden size-[15px] items-center justify-center rounded-md bg-transparent group-hover/container:flex",{flex:e}),onClick:()=>l({type:a,field:o,currency:r,name:s}),children:t.jsx(_e,{})})]})},Yt=({field:e,onMeasureSymbol:s,inputProps:o,currencyInfo:i})=>{const{value:n,onChange:a,onBlur:r,ref:l,...c}=e,{ref:d,onBlur:p,onFocus:u,onChange:m,...h}=o,g=f.useCallback(x=>{const N=typeof x=="number"?x.toString():x||"";return se({value:N,decimalScale:i.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[i]),[b,C]=f.useState(n||""),R=(x,N,v)=>{if(!x){C("");return}C(x)};f.useEffect(()=>{let x=n;isNaN(Number(n))||(x=g(x)),C(x)},[n,g]);const j=fe(d,l);return t.jsxs("div",{className:"relative flex size-full items-center",children:[t.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,ref:s,children:i.symbol_native}),t.jsx(ht,{...c,...h,ref:j,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-[60px] text-right outline-none",value:b||void 0,onValueChange:R,formatValueOnBlur:!0,onBlur:()=>{r(),p(),m(b,n)},onFocus:u,decimalScale:i.decimal_digits,decimalsLimit:i.decimal_digits,autoComplete:"off",tabIndex:-1})]})},Zt=me(),go=({name:e,currencies:s=[],regions:o=[],pricePreferences:i=[]})=>{const{t:n}=$();return f.useMemo(()=>[Zt.column({id:"name",name:n("fields.name"),disableHiding:!0,header:n("fields.name"),cell:a=>t.jsx(Ke.ReadonlyCell,{context:a,children:e})}),...Jt({currencies:s,regions:o,pricePreferences:i,getFieldName:(a,r)=>{var l;return(l=a.column.id)!=null&&l.startsWith("currency_prices")?`currency_prices.${r}`:`region_prices.${r}`},t:n})],[n,s,o,i,e])},Jt=({currencies:e,regions:s,pricePreferences:o,getFieldName:i,t:n})=>{const a=me();return[...(e==null?void 0:e.map(r=>{const l=o==null?void 0:o.find(d=>d.attribute==="currency_code"&&d.value===r),c=n("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()});return a.column({id:`currency_prices.${r}`,name:n("fields.priceTemplate",{regionOrCurrency:r.toUpperCase()}),field:d=>i(d,r),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(le,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>t.jsx(pe,{type:"currency",header:c,code:r,context:d})})}))??[],...(s==null?void 0:s.map(r=>{const l=o==null?void 0:o.find(d=>d.attribute==="region_id"&&d.value===r.id),c=n("fields.priceTemplate",{regionOrCurrency:r.name});return a.column({id:`region_prices.${r.id}`,name:n("fields.priceTemplate",{regionOrCurrency:r.name}),field:d=>i(d,r.id),type:"number",header:()=>t.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[t.jsx("span",{className:"truncate",title:c,children:c}),t.jsx(le,{includesTax:l==null?void 0:l.is_tax_inclusive})]}),cell:d=>(e==null?void 0:e.find(u=>u===r.currency_code))?t.jsx(pe,{type:"region",header:c,code:r.currency_code,context:d}):null})}))??[]]};export{ho as C,fo as S,Vt as U,De as a,mo as b,go as u};
