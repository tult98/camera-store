import{V as _}from"./chunk-F6ZOHZVB-DgzUCWbk.js";import{K as C}from"./chunk-6HTZNHPT-edTwFg32.js";import{b as t,u as y}from"./chunk-4TC5YS65-Cb_suZcW.js";import{b as f,U as b,dG as v,j as e,H as E,aa as F,dJ as S,t as j,v as s,I as m,B as p,ad as I,a4 as L,dA as u,a6 as x}from"./index-7F_IjDe6.js";import{D as h}from"./date-picker-DpgYDnDQ.js";import"./prompt-D8bgNQm2.js";import"./clsx-B-dksMZM.js";import"./popover-CrENjuwd.js";import"./index-DablXJ24.js";import"./x-mark-mini-DknEwfdc.js";import"./triangle-left-mini-BB2r9X4c.js";var D=L({name:x(),description:x().optional(),campaign_identifier:x().optional(),starts_at:u().optional(),ends_at:u().optional()}),M=({campaign:n})=>{const{t:a}=f(),{handleSuccess:o}=y(),i=F({defaultValues:{name:n.name||"",description:n.description||"",campaign_identifier:n.campaign_identifier||"",starts_at:n.starts_at?new Date(n.starts_at):void 0,ends_at:n.ends_at?new Date(n.ends_at):void 0},resolver:I(D)}),{mutateAsync:d,isPending:l}=S(n.id),g=i.handleSubmit(async r=>{await d({name:r.name,description:r.description,campaign_identifier:r.campaign_identifier,starts_at:r.starts_at,ends_at:r.ends_at},{onSuccess:({campaign:c})=>{j.success(a("campaigns.edit.successToast",{name:c.name})),o()},onError:c=>{j.error(c.message)}})});return e.jsx(t.Form,{form:i,children:e.jsxs(C,{onSubmit:g,className:"flex flex-1 flex-col",children:[e.jsx(t.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:i.control,name:"name",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("fields.name")}),e.jsx(s.Control,{children:e.jsx(m,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"description",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("fields.description")}),e.jsx(s.Control,{children:e.jsx(m,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"campaign_identifier",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("campaigns.fields.identifier")}),e.jsx(s.Control,{children:e.jsx(m,{...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"starts_at",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("campaigns.fields.start_date")}),e.jsx(s.Control,{children:e.jsx(h,{granularity:"minute",hourCycle:12,shouldCloseOnSelect:!1,...r})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"ends_at",render:({field:r})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:a("campaigns.fields.end_date")}),e.jsx(s.Control,{children:e.jsx(h,{granularity:"minute",shouldCloseOnSelect:!1,...r})}),e.jsx(s.ErrorMessage,{})]})})]})}),e.jsx(t.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(t.Close,{asChild:!0,children:e.jsx(p,{variant:"secondary",size:"small",children:a("actions.cancel")})}),e.jsx(p,{isLoading:l,type:"submit",variant:"primary",size:"small",children:a("actions.save")})]})})]})})},O=()=>{const{t:n}=f(),{id:a}=b(),{campaign:o,isLoading:i,isError:d,error:l}=v(a);if(d)throw l;return e.jsxs(t,{children:[e.jsxs(t.Header,{children:[e.jsx(t.Title,{asChild:!0,children:e.jsx(E,{children:n("campaigns.edit.header")})}),e.jsx(t.Description,{asChild:!0,children:e.jsx(_,{children:n("campaigns.edit.description")})})]}),!i&&o&&e.jsx(M,{campaign:o})]})};export{O as Component};
