{
  "openapi": "3.0.3",
  "info": {
    "title": "Camera Store API",
    "description": "Fujifilm Camera Store API built with MedusaJS v2 - E-commerce backend with custom featured categories functionality",
    "version": "1.0.0",
    "contact": {
      "name": "Camera Store API Support",
      "url": "https://github.com/your-org/camera-store"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:9000",
      "description": "Development server"
    },
    {
      "url": "https://your-api.domain.com",
      "description": "Production server"
    }
  ],
  "paths": {
    "/store/featured-categories": {
      "get": {
        "tags": ["Store"],
        "summary": "Get featured categories",
        "description": "Fetches all active featured categories with their products for homepage display",
        "operationId": "getFeaturedCategories",
        "parameters": [
          {
            "name": "x-publishable-api-key",
            "in": "header",
            "required": true,
            "description": "Publishable API key for authentication",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Featured categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeaturedCategoriesResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal server error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/admin/categories/{categoryId}/featured": {
      "put": {
        "tags": ["Admin"],
        "summary": "Set category as featured",
        "description": "Set a category as featured with hero banner configuration",
        "operationId": "setCategoryFeatured",
        "parameters": [
          {
            "name": "categoryId",
            "in": "path",
            "required": true,
            "description": "Category ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeaturedCategoryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category featured status updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryFeaturedResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Category not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": ["Admin"],
        "summary": "Get category featured status",
        "description": "Get featured status and settings for a category",
        "operationId": "getCategoryFeaturedStatus",
        "parameters": [
          {
            "name": "categoryId",
            "in": "path",
            "required": true,
            "description": "Category ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Category featured status retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CategoryFeaturedStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Category not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "FeaturedCategory": {
        "type": "object",
        "required": ["id", "category_name", "category_handle", "hero_image_url", "display_order", "products"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Category ID",
            "example": "pcat_01H..."
          },
          "category_name": {
            "type": "string",
            "description": "Category name",
            "example": "Máy ảnh"
          },
          "category_description": {
            "type": "string",
            "description": "Category description",
            "example": "Máy ảnh kỹ thuật số cho mọi nhu cầu chụp ảnh",
            "nullable": true
          },
          "category_handle": {
            "type": "string",
            "description": "Category URL handle",
            "example": "may-anh"
          },
          "hero_image_url": {
            "type": "string",
            "format": "url",
            "description": "Hero banner image URL",
            "example": "https://images.unsplash.com/photo-1606983340126..."
          },
          "display_order": {
            "type": "integer",
            "description": "Sort order for homepage display",
            "example": 0,
            "minimum": 0
          },
          "products": {
            "type": "array",
            "description": "Top 8 products from this category",
            "maxItems": 8,
            "items": {
              "$ref": "#/components/schemas/Product"
            }
          }
        }
      },
      "Product": {
        "type": "object",
        "required": ["id", "title", "handle", "thumbnail", "status"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Product ID",
            "example": "prod_01H..."
          },
          "title": {
            "type": "string",
            "description": "Product title",
            "example": "Fujifilm X100VI"
          },
          "handle": {
            "type": "string",
            "description": "Product URL handle",
            "example": "fujifilm-x100vi"
          },
          "description": {
            "type": "string",
            "description": "Product description",
            "example": "Fujifilm X100VI sở hữu cảm biến X-Trans CMOS 5 HR...",
            "nullable": true
          },
          "thumbnail": {
            "type": "string",
            "format": "url",
            "description": "Product thumbnail image URL",
            "example": "https://example.com/product-thumb.jpg"
          },
          "images": {
            "type": "array",
            "description": "Product images",
            "items": {
              "$ref": "#/components/schemas/ProductImage"
            }
          },
          "variants": {
            "type": "array",
            "description": "Product variants",
            "items": {
              "$ref": "#/components/schemas/ProductVariant"
            }
          },
          "status": {
            "type": "string",
            "enum": ["published", "draft"],
            "description": "Product status"
          }
        }
      },
      "ProductImage": {
        "type": "object",
        "required": ["id", "url"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Image ID"
          },
          "url": {
            "type": "string",
            "format": "url",
            "description": "Image URL"
          },
          "alt_text": {
            "type": "string",
            "description": "Alt text for accessibility",
            "nullable": true
          }
        }
      },
      "ProductVariant": {
        "type": "object",
        "required": ["id", "title"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Variant ID"
          },
          "title": {
            "type": "string",
            "description": "Variant title"
          },
          "sku": {
            "type": "string",
            "description": "Stock Keeping Unit",
            "nullable": true
          },
          "prices": {
            "type": "array",
            "description": "Variant prices",
            "items": {
              "$ref": "#/components/schemas/ProductPrice"
            }
          },
          "inventory_quantity": {
            "type": "integer",
            "description": "Available inventory quantity",
            "nullable": true,
            "minimum": 0
          }
        }
      },
      "ProductPrice": {
        "type": "object",
        "required": ["id", "currency_code", "amount", "price_type"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Price ID"
          },
          "currency_code": {
            "type": "string",
            "description": "Currency code (ISO 4217)",
            "example": "VND",
            "pattern": "^[A-Z]{3}$"
          },
          "amount": {
            "type": "integer",
            "description": "Price amount in smallest currency unit",
            "example": 1200000,
            "minimum": 0
          },
          "price_type": {
            "type": "string",
            "enum": ["default", "sale"],
            "description": "Price type"
          }
        }
      },
      "Category": {
        "type": "object",
        "required": ["id", "name", "handle", "is_active"],
        "properties": {
          "id": {
            "type": "string",
            "description": "Category ID",
            "example": "pcat_01H..."
          },
          "name": {
            "type": "string",
            "description": "Category name",
            "example": "Máy ảnh"
          },
          "description": {
            "type": "string",
            "description": "Category description",
            "nullable": true
          },
          "handle": {
            "type": "string",
            "description": "Category URL handle",
            "example": "may-anh"
          },
          "is_active": {
            "type": "boolean",
            "description": "Whether the category is active"
          },
          "parent_category_id": {
            "type": "string",
            "description": "Parent category ID",
            "nullable": true
          },
          "metadata": {
            "type": "object",
            "description": "Additional metadata including featured category settings",
            "nullable": true,
            "additionalProperties": true
          }
        }
      },
      "FeaturedCategoryRequest": {
        "type": "object",
        "required": ["is_featured"],
        "properties": {
          "is_featured": {
            "type": "boolean",
            "description": "Whether category should be featured"
          },
          "hero_image_url": {
            "type": "string",
            "format": "url",
            "description": "Hero banner image URL - must be landscape image (jpg, jpeg, png, webp)",
            "pattern": "^https?://.*\\.(jpg|jpeg|png|webp)(\\?.*)?$"
          },
          "display_order": {
            "type": "integer",
            "description": "Sort order for homepage display",
            "minimum": 0,
            "default": 0
          }
        }
      },
      "FeaturedCategoriesResponse": {
        "type": "object",
        "required": ["featured_categories"],
        "properties": {
          "featured_categories": {
            "type": "array",
            "description": "List of featured categories",
            "items": {
              "$ref": "#/components/schemas/FeaturedCategory"
            }
          }
        }
      },
      "CategoryFeaturedResponse": {
        "type": "object",
        "required": ["category", "message"],
        "properties": {
          "category": {
            "$ref": "#/components/schemas/Category"
          },
          "message": {
            "type": "string",
            "description": "Success message",
            "example": "Category featured status updated successfully"
          }
        }
      },
      "CategoryFeaturedStatusResponse": {
        "type": "object",
        "required": ["category_id", "name", "is_featured"],
        "properties": {
          "category_id": {
            "type": "string",
            "description": "Category ID",
            "example": "pcat_01H..."
          },
          "name": {
            "type": "string",
            "description": "Category name",
            "example": "Máy ảnh"
          },
          "is_featured": {
            "type": "boolean",
            "description": "Whether the category is featured"
          },
          "hero_image_url": {
            "type": "string",
            "format": "url",
            "description": "Hero banner image URL",
            "nullable": true
          },
          "display_order": {
            "type": "integer",
            "description": "Display order",
            "minimum": 0,
            "nullable": true
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": ["error"],
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message",
            "example": "Failed to fetch featured categories"
          },
          "details": {
            "type": "string",
            "description": "Additional error details",
            "nullable": true
          }
        }
      }
    },
    "securitySchemes": {
      "PublishableApiKey": {
        "type": "apiKey",
        "in": "header",
        "name": "x-publishable-api-key",
        "description": "Publishable API key for store endpoints"
      },
      "AdminAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "Admin authentication for private endpoints"
      }
    }
  },
  "security": [
    {
      "PublishableApiKey": []
    },
    {
      "AdminAuth": []
    }
  ],
  "tags": [
    {
      "name": "Store",
      "description": "Public storefront API endpoints"
    },
    {
      "name": "Admin",
      "description": "Admin API endpoints for management"
    }
  ]
}